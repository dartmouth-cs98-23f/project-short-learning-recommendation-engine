second,duration,transcript
2.98,3.02,"Hi, I’m Carrie Anne and welcome to CrashCourse
Computer Science!"
6.0,3.71,"As we’ve discussed throughout the series,
computers have come a long way from mechanical"
9.71,5.49,"devices capable of maybe one calculation per second, to CPUs running at kilohertz and megahertz speeds."
15.36,3.86,"The device you’re watching this video on
right now is almost certainly running at Gigahertz"
19.22,3.39,"speeds - that’s billions of instructions
executed every second."
22.61,2.37,"Which, trust me, is a lot of computation!"
24.98,3.99,"In the early days of electronic computing,
processors were typically made faster by improving"
28.97,4.17,"the switching time of the transistors inside
the chip - the ones that make up all the logic"
33.14,3.3,"gates, ALUs and other stuff we’ve talked
about over the past few episodes."
36.44,4.639,"But just making transistors faster and more
efficient only went so far, so processor designers"
41.079,4.461,"have developed various techniques to boost
performance allowing not only simple instructions"
45.54,3.76,"to run fast, but also performing much more
sophisticated operations."
49.3,9.18,INTRO
58.48,5.2,"Last episode, we created a small program for
our CPU that allowed us to divide two numbers."
63.69,4.55,"We did this by doing many subtractions in
a row... so, for example, 16 divided by 4"
68.25,5.52,"could be broken down into the smaller problem
of 16 minus 4, minus 4, minus 4, minus 4."
73.77,3.549,"When we hit zero, or a negative number, we
knew that we we’re done."
77.319,3.55,"But this approach gobbles up a lot of clock
cycles, and isn’t particularly efficient."
80.869,4.151,"So most computer processors today have divide
as one of the instructions that the ALU can"
85.02,1.299,perform in hardware.
86.32,4.42,"Of course, this extra circuitry makes the
ALU bigger and more complicated to design,"
90.74,4.68,"but also more capable - a complexity-for-speed
tradeoff that has been made many times in"
95.42,1.0,computing history.
96.42,4.269,"For instance, modern computer processors now
have special circuits for things like graphics"
100.689,4.5,"operations, decoding compressed video, and
encrypting files - all of which are operations"
105.189,3.61,"that would take many many many clock cycles
to perform with standard operations."
108.8,4.62,"You may have even heard of processors with
MMX, 3DNow!, or SSE."
113.42,4.24,"These are processors with additional, fancy
circuits that allow them to execute additional,"
117.67,3.13,"fancy instructions - for things like gaming
and encryption."
120.81,3.599,"These extensions to the instruction set have
grown, and grown over time, and once people"
124.409,3.45,"have written programs to take advantage of
them, it’s hard to remove them."
127.859,4.371,"So instruction sets tend to keep getting larger
and larger keeping all the old opcodes around"
132.23,1.42,for backwards compatibility.
133.65,6.08,"The Intel 4004, the first truly integrated
CPU, had 46 instructions - which was enough"
139.73,1.86,to build a fully functional computer.
141.59,4.52,"But a modern computer processor has thousands
of different instructions, which utilize all"
146.11,2.439,sorts of clever and complex internal circuitry.
148.549,5.16,"Now, high clock speeds and fancy instruction
sets lead to another problem - getting data"
153.709,1.851,in and out of the CPU quickly enough.
155.56,4.959,"It’s like having a powerful steam locomotive,
but no way to shovel in coal fast enough."
160.519,1.8,"In this case, the bottleneck is RAM."
162.319,3.37,"RAM is typically a memory module that lies
outside the CPU."
165.689,3.92,"This means that data has to be transmitted
to and from RAM along sets of data wires,"
169.609,1.341,called a bus.
170.95,3.5,"This bus might only be a few centimeters long,
and remember those electrical signals are"
174.45,3.88,"traveling near the speed of light, but when
you are operating at gigahertz speeds – that’s"
178.33,4.57,"billionths of a second – even this small
delay starts to become problematic."
182.9,4.13,"It also takes time for RAM itself to lookup
the address, retrieve the data, and configure"
187.03,1.41,itself for output.
188.46,4.05,"So a “load from RAM” instruction might take
dozens of clock cycles to complete, and during"
192.51,3.53,"this time the processor is just sitting there
idly waiting for the data."
196.04,4.27,"One solution is to put a little piece of RAM
right on the CPU -- called a cache."
200.31,3.58,"There isn’t a lot of space on a processor’s
chip, so most caches are just kilobytes or"
203.89,3.41,"maybe megabytes in size, where RAM is usually
gigabytes."
207.3,2.22,"Having a cache speeds things up in a clever
way."
209.53,4.95,"When the CPU requests a memory location from
RAM, the RAM can transmit not just one single"
214.499,2.07,"value, but a whole block of data."
216.569,2.09,"This takes only a little bit more time than
transmitting a single value, but it allows"
218.659,2.521,this data block to be saved into the cache.
221.18,4.74,"This tends to be really useful because computer
data is often arranged and processed sequentially."
225.92,4.319,"For example, let say the processor is totalling
up daily sales for a restaurant."
230.239,3.961,"It starts by fetching the first transaction
from RAM at memory location 100."
234.2,4.679,"The RAM, instead of sending back just that
one value, sends a block of data, from memory"
238.879,3.961,"location 100 through 200, which are then all
copied into the cache."
242.84,3.811,"Now, when the processor requests the next
transaction to add to its running total, the"
246.651,4.208,"value at address 101, the cache will say “Oh,
I’ve already got that value right here,"
250.859,1.38,so I can give it to you right away!”
252.239,2.491,"And there’s no need to go all the way to
RAM."
254.73,3.759,"Because the cache is so close to the processor,
it can typically provide the data in a single"
258.489,2.55,clock cycle -- no waiting required.
261.039,3.951,"This speeds things up tremendously over having
to go back and forth to RAM every single time."
264.99,3.45,"When data requested in RAM is already stored
in the cache like this it’s called a cache"
268.44,1.0,"hit,"
269.44,3.53,"and if the data requested isn’t in the cache,
so you have to go to RAM, it’s a called"
272.97,1.12,a cache miss.
274.09,4.329,"The cache can also be used like a scratch
space, storing intermediate values when performing"
278.42,2.7,"a longer, or more complicated calculation."
281.12,3.46,"Continuing our restaurant example, let’s
say the processor has finished totalling up"
284.59,4.4,"all of the sales for the day, and wants to
store the result in memory address 150."
288.99,4.329,"Like before, instead of going back all the
way to RAM to save that value, it can be stored"
293.319,5.72,"in cached copy, which is faster to save to,
and also faster to access later if more calculations"
299.04,0.68,are needed.
299.72,4.28,"But this introduces an interesting problem
-- the cache’s copy of the data is now different"
304.009,1.891,to the real version stored in RAM.
305.9,3.97,"This mismatch has to be recorded, so that
at some point everything can get synced up."
309.87,4.09,"For this purpose, the cache has a special
flag for each block of memory it stores, called"
313.96,4.86,"the dirty bit -- which might just be the best
term computer scientists have ever invented."
318.82,4.24,"Most often this synchronization happens when
the cache is full, but a new block of memory"
323.06,1.9,is being requested by the processor.
324.96,4.26,"Before the cache erases the old block to free
up space, it checks its dirty bit, and if"
329.22,4.04,"it’s dirty, the old block of data is written
back to RAM before loading in the new block."
333.26,3.9,"Another trick to boost cpu performance is
called instruction pipelining."
337.169,3.271,"Imagine you have to wash an entire hotel’s
worth of sheets, but you’ve only got one"
340.44,1.58,washing machine and one dryer.
342.02,3.77,"One option is to do it all sequentially: put
a batch of sheets in the washer and wait 30"
345.79,1.15,minutes for it to finish.
346.94,3.24,"Then take the wet sheets out and put them
in the dryer and wait another 30 minutes for"
350.18,1.13,that to finish.
351.31,2.4,"This allows you to do one batch of sheets
every hour."
353.71,3.799,"Side note: if you have a dryer that can dry
a load of laundry in 30 minutes, please tell"
357.509,3.991,"me the brand and model in the comments, because
I’m living with 90 minute dry times, minimum."
361.5,4.76,"But, even with this magic clothes dryer, you
can speed things up even more if you parallelize"
366.26,1.01,your operation.
367.27,3.16,"As before, you start off putting one batch
of sheets in the washer."
370.43,1.829,You wait 30 minutes for it to finish.
372.259,2.571,"Then you take the wet sheets out and put them
in the dryer."
374.83,4.209,"But this time, instead of just waiting 30
minutes for the dryer to finish, you simultaneously"
379.04,2.24,start another load in the washing machine.
381.28,2.26,Now you’ve got both machines going at once.
383.54,4.119,"Wait 30 minutes, and one batch is now done,
one batch is half done, and another is ready"
387.659,1.0,to go in.
388.66,1.52,This effectively doubles your throughput.
390.22,2.16,Processor designs can apply the same idea.
392.38,5.17,"In episode 7, our example processor performed
the fetch-decode-execute cycle sequentially"
397.55,4.17,"and in a continuous loop: Fetch-decode-execute,
fetch-decode-execute, fetch-decode-execute,"
401.72,1.53,and so on.
403.25,2.8,"This meant our design required three clock
cycles to execute one instruction."
406.05,4.19,"But each of these stages uses a different
part of the CPU, meaning there is an opportunity"
410.24,1.0,to parallelize!
411.24,4.06,"While one instruction is getting executed,
the next instruction could be getting decoded,"
415.3,2.54,"and the instruction beyond that fetched from
memory."
417.84,3.789,"All of these separate processes can overlap
so that all parts of the CPU are active at"
421.629,1.31,any given time.
422.939,4.521,"In this pipelined design, an instruction is
executed every single clock cycle which triples"
427.46,1.0,the throughput.
428.46,2.6,"But just like with caching this can lead to
some tricky problems."
431.06,3.05,A big hazard is a dependency in the instructions.
434.11,3.649,"For example, you might fetch something that
the currently executing instruction is just"
437.759,3.431,"about to modify, which means you’ll end
up with the old value in the pipeline."
441.19,4.3,"To compensate for this, pipelined processors
have to look ahead for data dependencies,"
445.49,2.85,"and if necessary, stall their pipelines to
avoid problems."
448.34,4.38,"High end processors, like those found in laptops
and smartphones, go one step further and can"
452.72,5.12,"dynamically reorder instructions with dependencies
in order to minimize stalls and keep the pipeline"
457.84,2.579,"moving, which is called out-of-order execution."
460.42,3.82,"As you might imagine, the circuits that figure
this all out are incredibly complicated."
464.24,5.06,"Nonetheless, pipelining is tremendously effective
and almost all processors implement it today."
469.3,4.96,"Another big hazard are conditional jump instructions
-- we talked about one example, a JUMP NEGATIVE,"
474.27,0.99,last episode.
475.27,3.98,"These instructions can change the execution
flow of a program depending on a value."
479.25,4.25,"A simple pipelined processor will perform
a long stall when it sees a jump instruction,"
483.5,2.02,waiting for the value to be finalized.
485.53,4.07,"Only once the jump outcome is known, does
the processor start refilling its pipeline."
489.61,4.32,"But, this can produce long delays, so high-end
processors have some tricks to deal with this"
493.93,1.0,problem too.
494.93,3.6,"Imagine an upcoming jump instruction as a
fork in a road - a branch."
498.53,3.43,"Advanced CPUs guess which way they are going
to go, and start filling their pipeline with"
501.98,5.24,"instructions based off that guess – a technique
called speculative execution."
507.22,4.27,"When the jump instruction is finally resolved,
if the CPU guessed correctly, then the pipeline"
511.49,3.59,"is already full of the correct instructions
and it can motor along without delay."
515.08,3.71,"However, if the CPU guessed wrong, it has
to discard all its speculative results and"
518.79,4.07,"perform a pipeline flush - sort of like when
you miss a turn and have to do a u-turn to"
522.86,3.42,"get back on route, and stop your GPS’s insistent
shouting."
526.28,4.49,"To minimize the effects of these flushes,
CPU manufacturers have developed sophisticated"
530.77,3.43,"ways to guess which way branches will go,
called branch prediction."
534.2,5.22,"Instead of being a 50/50 guess, today’s
processors can often guess with over 90% accuracy!"
539.42,4.01,"In an ideal case, pipelining lets you complete
one instruction every single clock cycle,"
543.43,4.66,"but then superscalar processors came along
which can execute more than one instruction"
548.09,0.99,per clock cycle.
549.08,4.06,"During the execute phase even in a pipelined design, whole areas of the processor might"
553.14,1.5,be totally idle.
554.64,4.32,"For example, while executing an instruction
that fetches a value from memory, the ALU"
558.96,2.69,"is just going to be sitting there, not doing
a thing."
561.65,4.74,"So why not fetch-and-decode several instructions
at once, and whenever possible, execute instructions"
566.39,3.25,"that require different parts of the CPU all
at the same time!?"
569.64,3.22,"But we can take this
one step further and add duplicate circuitry"
572.86,1.66,for popular instructions.
574.52,4.57,"For example, many processors will have four,
eight or more identical ALUs, so they can"
579.09,3.09,"execute many mathematical instructions all
in parallel!"
582.18,4.04,"Ok, the techniques we’ve discussed so far
primarily optimize the execution throughput"
586.22,4.47,"of a single stream of instructions, but another
way to increase performance is to run several"
590.69,3.48,"streams of instructions at once with multi-core
processors."
594.17,2.91,"You might have heard of dual core or quad
core processors."
597.08,4.6,"This means there are multiple independent
processing units inside of a single CPU chip."
601.68,4.09,"In many ways, this is very much like having
multiple separate CPUs, but because they’re"
605.77,4.83,"tightly integrated, they can share some resources,
like cache, allowing the cores to work together"
610.6,1.29,on shared computations.
611.89,4.43,"But, when more cores just isn’t enough,
you can build computers with multiple independent"
616.32,1.0,CPUs!
617.32,4.31,"High end computers, like the servers streaming
this video from YouTube’s datacenter, often"
621.63,3.79,"need the extra horsepower to keep it silky
smooth for the hundreds of people watching"
625.42,1.0,simultaneously.
626.42,3.58,"Two- and four-processor configuration are
the most common right now, but every now and"
630.0,2.7,"again even that much processing power isn’t
enough."
632.7,4.24,"So we humans get extra ambitious and build
ourselves a supercomputer!"
636.94,3.48,"If you’re looking to do some really monster
calculations – like simulating the formation"
640.42,3.52,"of the universe - you’ll need some pretty
serious compute power."
643.94,3.21,"A few extra processors in a desktop computer
just isn’t going to cut it."
647.15,2.53,You’re going to need a lot of processors.
649.68,2.24,No.. no... even more than that.
651.92,1.0,A lot more!
652.92,3.84,"When this video was made, the world’s fastest
computer was located in The National Supercomputing"
656.76,1.36,"Center in Wuxi, China."
658.12,8.47,"The Sunway TaihuLight contains a brain-melting
40,960 CPUs, each with 256 cores!"
666.59,5.03,"Thats over ten million cores in total... and
each one of those cores runs at 1.45 gigahertz."
671.62,5.47,"In total, this machine can process 93 Quadrillion
-- that’s 93 million-billions -- floating"
677.09,3.22,"point math operations per second, knows as
FLOPS."
680.31,1.54,"And trust me, that’s a lot of FLOPS!!"
681.85,3.82,"No word on whether it can run Crysis at max
settings, but I suspect it might."
685.67,4.4,"So long story short, not only have computer
processors gotten a lot faster over the years,"
690.07,3.92,"but also a lot more sophisticated, employing
all sorts of clever tricks to squeeze out"
693.99,2.47,more and more computation per clock cycle.
696.46,4.12,"Our job is to wield that incredible processing
power to do cool and useful things."
700.58,4.02,"That’s the essence of programming, which
we’ll start discussing next episode."
704.64,1.4,See you next week.
